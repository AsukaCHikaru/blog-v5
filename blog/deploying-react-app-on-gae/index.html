<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width"><title>Deploying React.js App on GAE | Asuka Wang</title><meta name="description" content="Asuka Wang's blog"><meta property="og:title" content="Deploying React.js App on GAE | Asuka Wang"><meta property="twitter:title" content="Deploying React.js App on GAE | Asuka Wang"><meta name="next-head-count" content="6"><link rel="preload" href="/_next/static/css/3cdbb22e386a6252.css" as="style"><link rel="preload" as="font" type="font/woff2" crossorigin="anonymous" href="/subfont/Noto_Serif_JP_CJK-200-ef83f20108.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin="anonymous" href="/subfont/Noto_Serif_JP-200-6411997352.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin="anonymous" href="/subfont/Gentium_Plus-400-62b8f514fb.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin="anonymous" href="/subfont/Noto_Serif_JP_CJK-400-a9cf5e5b7a.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin="anonymous" href="/subfont/Noto_Serif_JP-400-10e25bcd0f.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin="anonymous" href="/subfont/Gentium_Plus_Book-700-47a76121c3.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin="anonymous" href="/subfont/Noto_Sans-400-fa7c89e361.woff2"><link rel="stylesheet" href="/subfont/fonts-e8897b0bcb.css"><link rel="stylesheet" href="/_next/static/css/3cdbb22e386a6252.css" data-n-g=""><link rel="preload" href="/_next/static/css/aa861d8c0ccbebd0.css" as="style"><link rel="stylesheet" href="/_next/static/css/aa861d8c0ccbebd0.css" data-n-p=""><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-b8f8d6679aaa5f42.js" defer=""></script><script src="/_next/static/chunks/framework-114634acb84f8baa.js" defer=""></script><script src="/_next/static/chunks/main-f2ca60db2beb93ed.js" defer=""></script><script src="/_next/static/chunks/pages/_app-95f49e67a22d34df.js" defer=""></script><script src="/_next/static/chunks/542-7be5b5539309fe0b.js" defer=""></script><script src="/_next/static/chunks/808-20d693b00a8abebc.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5Bpathname%5D-14232e8fa7e9c453.js" defer=""></script><script src="/_next/static/9Z7N7eLSY9tvz9ph3iSLw/_buildManifest.js" defer=""></script><script src="/_next/static/9Z7N7eLSY9tvz9ph3iSLw/_ssgManifest.js" defer=""></script></head><body><div id="__next"><main><div class="text-color Layout_container__S4aNf" data-is-menu-open="false"><div class="SiteHeader_container__8tKwA" data-is-menu-open="false"><div class="SiteHeader_nav-container__oEq2d"><div class="SiteHeader_section-container__tAKnZ"><a class="SiteHeader_section-link__9DmFE interactive-color text-color" href="/blog/">blog</a><a class="SiteHeader_section-link__9DmFE interactive-color " href="/about/">about</a><a target="_blank" class="SiteHeader_section-link__9DmFE interactive-color" href="/blog/feed.xml">rss</a></div><button class="SiteHeader_menu-button__eK9ND">menu</button><a class="SiteHeader_publication-folio___ZFZS text-color" href="/">ASUKA WANG</a></div><div class="SiteHeader_divider__cq_R_ border-color-100"></div><div class="SiteHeader_menu-wrapper__2evr7"></div></div><div class="Layout_full-content__MQIxS"><div class="PostDetailPageHeader_container__fcMw9"><div class="Layout_main-content__mr9_2"><h1 class="PostDetailPageHeader_title__YwZEK">Deploying React.js App on GAE</h1><div class="PostDetailPageHeader_publish-date__pMF22">September 19, 2019</div></div></div></div><div class="Layout_main-content__mr9_2"><article class="PostDetailPage_article__K8T4B"><p>For people like me who have only used a static host like Amazon S3 before, deploying React app on Google App Engine is a challenge. For all the references I found it looks straightforward and easy to deploy a React app, yet I still struggled for 2 days. Here is how I did it, with the things I realized by logs and tries and errors.</p><h3 class="PostBodyBlock_h3__BUDla" id="gae-is-not-a-static-host;-it's-a-virtual-machine">GAE is not a static host; it's a virtual machine</h3><p>So you can't just push the build. You have to serve it, like starting a development server. So the next problem is, how?</p><h3 class="PostBodyBlock_h3__BUDla" id="with-default-config--gae-only-executes-two-scripts-when-deploying">With default config, GAE only executes two scripts when deploying</h3><p>They are <code class="PostBodyBlock_inline-code__TAzYM">npm install</code> and <code class="PostBodyBlock_inline-code__TAzYM">npm start</code>.</p><p>Like I mentioned before, for merely starting a server for React, these two seems enough. Then I found out it's not, because default <code class="PostBodyBlock_inline-code__TAzYM">npm start</code> provided by Create-React-App, which equals to <code class="PostBodyBlock_inline-code__TAzYM">node scripts/start.js</code> if you check out <code class="PostBodyBlock_inline-code__TAzYM">package.json</code>, takes much time, and it's long enough to make the app not working. So we need a faster way to&nbsp;<em>serve</em>&nbsp;it.</p><h3 class="PostBodyBlock_h3__BUDla" id="serve-can-do-the-trick">Serve can do the trick</h3><p>Literally,&nbsp;<a href="notion://www.notion.so/asukachikaru/%5B%3Chttps://github.com/zeit/serve%3E%5D(%3Chttps://github.com/zeit/serve%3E)" class="PostBodyBlock_link__faaEN" rel="noreferrer noopener" target="_blank">serve</a>.</p><p>Notice serve needs static files to run, so we need to build it first. Since GAE only runs two scripts, and building takes some time too, so I bound it to <code class="PostBodyBlock_inline-code__TAzYM">postinstall</code> instead of <code class="PostBodyBlock_inline-code__TAzYM">prestart</code> . By this way, GAE automatically builds right after it installs dependencies.</p><p>You can also use some host framework (like express) to do the hosting and routing stuff too.</p><h3 class="PostBodyBlock_h3__BUDla" id="config-the-port">Config the port</h3><p>React development server default port is 3000, and serve's is 5000, while GAE uses 8080.</p><p>The scripts in <code class="PostBodyBlock_inline-code__TAzYM">package.json</code> I used when finally successfully deployed looks like this:</p><pre class="CodeBlock_block__wRht1"><code class="CodeBlock_code__1aD9x language-json">"script": {
  "postinstall": "npm run build",
  "start": "serve -l 8080 -s build"
}</code></pre><p>You need to configure app.yaml too, but I think many resources is talking about how to do it.</p><p>I hope this helps!</p></article><div class="PostDetailPage_additional-list-container__b_oHL"><div class="AdditionalPostList_container__ucjfo"><div class="AdditionalPostList_category-link__EDTWa">More from<a href="/blog/archive/?category=note">note</a></div><div class="AdditionalPostList_card-list__jz3F_"><a class="AdditionalPostList_card__doJcw" href="/blog/thoughts-on-building-a-game-with-xstate/"><div><div class="AdditionalPostList_card-title__FDhSX">Thoughts on Building a Game with XState</div><div class="AdditionalPostList_card-description__Enc8v">After hearing about XState's good reputation for years, I used it to build the prototype for my game. These are my thoughts.</div></div><div class="AdditionalPostList_card-publish-date__Jvdgm">January 4, 2025</div></a><a class="AdditionalPostList_card__doJcw" href="/blog/godot-essentials/"><div><div class="AdditionalPostList_card-title__FDhSX">Godot Essentials</div><div class="AdditionalPostList_card-description__Enc8v">The biggest lessons I learned in my first Godot project.</div></div><div class="AdditionalPostList_card-publish-date__Jvdgm">April 21, 2024</div></a><a class="AdditionalPostList_card__doJcw" href="/blog/unity-dev-memo-2/"><div><div class="AdditionalPostList_card-title__FDhSX">Unity Dev Memo (2)</div><div class="AdditionalPostList_card-description__Enc8v">關於 Unity3D 內 raycast 的研究筆記。</div></div><div class="AdditionalPostList_card-publish-date__Jvdgm">October 4, 2020</div></a><a class="AdditionalPostList_card__doJcw" href="/blog/unity-dev-memo-1/"><div><div class="AdditionalPostList_card-title__FDhSX">Unity Dev Memo (1)</div><div class="AdditionalPostList_card-description__Enc8v">關於 Unity3D 物體移動，腳本執行順序以及 Hitbox 的筆記。</div></div><div class="AdditionalPostList_card-publish-date__Jvdgm">March 8, 2020</div></a><a class="AdditionalPostList_card__doJcw" href="/blog/a-rather-easy-way-to-implement-quicksort-in-js/"><div><div class="AdditionalPostList_card-title__FDhSX">A Rather Easy Way to Implement Quicksort in JavaScript</div><div class="AdditionalPostList_card-description__Enc8v">My attempt to implement quicksort.</div></div><div class="AdditionalPostList_card-publish-date__Jvdgm">May 23, 2019</div></a></div></div><div class="AdditionalPostList_container__ucjfo"><a class="AdditionalPostList_archive-link__7Q6ys" href="/blog/archive/">Archive</a><div class="AdditionalPostList_card-list__jz3F_"><a class="AdditionalPostList_card__doJcw" href="/blog/observation-on-programming-with-ai/"><div><div class="AdditionalPostList_card-title__FDhSX">Observation on Programming with AI</div><div class="AdditionalPostList_card-description__Enc8v">I reckoned getting familiar with AI coding tools is necessary, tried some, and to my surprise, I turned out to be quite optimistic.</div></div><div class="AdditionalPostList_card-publish-date__Jvdgm">March 13, 2025</div></a><a class="AdditionalPostList_card__doJcw" href="/blog/blogging-and-digital-gardening/"><div><div class="AdditionalPostList_card-title__FDhSX">Blogging and Digital Gardening in the Social Platform and Generative AI Era</div><div class="AdditionalPostList_card-description__Enc8v">I talk to myself about why bother writing at somewhere nobody comes.</div></div><div class="AdditionalPostList_card-publish-date__Jvdgm">February 11, 2025</div></a><a class="AdditionalPostList_card__doJcw" href="/blog/a-redemption-three-years-later/"><div><div class="AdditionalPostList_card-title__FDhSX">A Redemption Three Years Later</div><div class="AdditionalPostList_card-description__Enc8v">CD PROJEKT RED made a promise about Night City, which they broke. Three years later they had another attempt, and to me, it was their redemption.</div></div><div class="AdditionalPostList_card-publish-date__Jvdgm">January 13, 2025</div></a><a class="AdditionalPostList_card__doJcw" href="/blog/s14-recap/"><div><div class="AdditionalPostList_card-title__FDhSX">S14 Recap</div><div class="AdditionalPostList_card-description__Enc8v">I did not play a lot of league during 2024, but I had a few unforgettable moments nonetheless.</div></div><div class="AdditionalPostList_card-publish-date__Jvdgm">January 7, 2025</div></a><a class="AdditionalPostList_card__doJcw" href="/blog/thoughts-on-building-a-game-with-xstate/"><div><div class="AdditionalPostList_card-title__FDhSX">Thoughts on Building a Game with XState</div><div class="AdditionalPostList_card-description__Enc8v">After hearing about XState's good reputation for years, I used it to build the prototype for my game. These are my thoughts.</div></div><div class="AdditionalPostList_card-publish-date__Jvdgm">January 4, 2025</div></a></div></div></div></div><div class="SiteFooter_container__0v6cR border-color"><a href="https://asukawang.com" rel="noopener noreferrer" target="_blank" class="SiteFooter_link__RuMSe interactive-color">asukawang.com 2018-</a></div></div></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"postContent":[{"type":"paragraph","children":[{"type":"plain","text":"For people like me who have only used a static host like Amazon S3 before, deploying React app on Google App Engine is a challenge. For all the references I found it looks straightforward and easy to deploy a React app, yet I still struggled for 2 days. Here is how I did it, with the things I realized by logs and tries and errors."}]},{"type":"heading","children":[{"type":"plain","text":"GAE is not a static host; it's a virtual machine"}],"depth":2},{"type":"paragraph","children":[{"type":"plain","text":"So you can't just push the build. You have to serve it, like starting a development server. So the next problem is, how?"}]},{"type":"heading","children":[{"type":"plain","text":"With default config, GAE only executes two scripts when deploying"}],"depth":2},{"type":"paragraph","children":[{"type":"plain","text":"They are "},{"type":"inlineCode","text":"npm install"},{"type":"plain","text":" and "},{"type":"inlineCode","text":"npm start"},{"type":"plain","text":"."}]},{"type":"paragraph","children":[{"type":"plain","text":"Like I mentioned before, for merely starting a server for React, these two seems enough. Then I found out it's not, because default "},{"type":"inlineCode","text":"npm start"},{"type":"plain","text":" provided by Create-React-App, which equals to "},{"type":"inlineCode","text":"node scripts/start.js"},{"type":"plain","text":" if you check out "},{"type":"inlineCode","text":"package.json"},{"type":"plain","text":", takes much time, and it's long enough to make the app not working. So we need a faster way to "},{"type":"italic","text":"serve"},{"type":"plain","text":" it."}]},{"type":"heading","children":[{"type":"plain","text":"Serve can do the trick"}],"depth":2},{"type":"paragraph","children":[{"type":"plain","text":"Literally, "},{"type":"link","text":"serve","url":"notion://www.notion.so/asukachikaru/%5B%3Chttps://github.com/zeit/serve%3E%5D(%3Chttps://github.com/zeit/serve%3E)"},{"type":"plain","text":"."}]},{"type":"paragraph","children":[{"type":"plain","text":"Notice serve needs static files to run, so we need to build it first. Since GAE only runs two scripts, and building takes some time too, so I bound it to "},{"type":"inlineCode","text":"postinstall"},{"type":"plain","text":" instead of "},{"type":"inlineCode","text":"prestart"},{"type":"plain","text":" . By this way, GAE automatically builds right after it installs dependencies."}]},{"type":"paragraph","children":[{"type":"plain","text":"You can also use some host framework (like express) to do the hosting and routing stuff too."}]},{"type":"heading","children":[{"type":"plain","text":"Config the port"}],"depth":2},{"type":"paragraph","children":[{"type":"plain","text":"React development server default port is 3000, and serve's is 5000, while GAE uses 8080."}]},{"type":"paragraph","children":[{"type":"plain","text":"The scripts in "},{"type":"inlineCode","text":"package.json"},{"type":"plain","text":" I used when finally successfully deployed looks like this:"}]},{"type":"code","lang":"json","text":"\"script\": {\n  \"postinstall\": \"npm run build\",\n  \"start\": \"serve -l 8080 -s build\"\n}"},{"type":"paragraph","children":[{"type":"plain","text":"You need to configure app.yaml too, but I think many resources is talking about how to do it."}]},{"type":"paragraph","children":[{"type":"plain","text":"I hope this helps!"}]}],"postMetadata":{"id":"deploying-react-app-on-gae","title":"Deploying React.js App on GAE","description":"","category":"note","topic":"web development","tags":[],"publishDate":"2019-09-19","pathname":"deploying-react-app-on-gae"},"last5posts":[{"id":"observation-on-programming-with-ai","title":"Observation on Programming with AI","description":"I reckoned getting familiar with AI coding tools is necessary, tried some, and to my surprise, I turned out to be quite optimistic.","category":"essay","topic":"programming","tags":[],"publishDate":"2025-03-13","pathname":"observation-on-programming-with-ai"},{"id":"blogging-and-digital-gardening","title":"Blogging and Digital Gardening in the Social Platform and Generative AI Era","description":"I talk to myself about why bother writing at somewhere nobody comes.","category":"essay","topic":"life","tags":[],"publishDate":"2025-02-11","pathname":"blogging-and-digital-gardening"},{"id":"a-redemption-three-years-later","title":"A Redemption Three Years Later","description":"CD PROJEKT RED made a promise about Night City, which they broke. Three years later they had another attempt, and to me, it was their redemption.","category":"review","topic":"gaming","tags":[],"publishDate":"2025-01-13","pathname":"a-redemption-three-years-later"},{"id":"s14-recap","title":"S14 Recap","description":"I did not play a lot of league during 2024, but I had a few unforgettable moments nonetheless.","category":"retrospective","topic":"gaming","tags":[],"publishDate":"2025-01-07","pathname":"s14-recap"},{"id":"thoughts-on-building-a-game-with-xstate","title":"Thoughts on Building a Game with XState","description":"After hearing about XState's good reputation for years, I used it to build the prototype for my game. These are my thoughts.","category":"note","topic":"game development","tags":[],"publishDate":"2025-01-04","pathname":"thoughts-on-building-a-game-with-xstate"}],"categoryPosts":[{"id":"thoughts-on-building-a-game-with-xstate","title":"Thoughts on Building a Game with XState","description":"After hearing about XState's good reputation for years, I used it to build the prototype for my game. These are my thoughts.","category":"note","topic":"game development","tags":[],"publishDate":"2025-01-04","pathname":"thoughts-on-building-a-game-with-xstate"},{"id":"godot-essentials","title":"Godot Essentials","description":"The biggest lessons I learned in my first Godot project.","category":"note","topic":"game development","tags":[],"publishDate":"2024-04-21","pathname":"godot-essentials"},{"id":"unity-dev-memo-2","title":"Unity Dev Memo (2)","description":"關於 Unity3D 內 raycast 的研究筆記。","category":"note","topic":"game development","tags":[],"publishDate":"2020-10-04","pathname":"unity-dev-memo-2"},{"id":"unity-dev-memo-1","title":"Unity Dev Memo (1)","description":"關於 Unity3D 物體移動，腳本執行順序以及 Hitbox 的筆記。","category":"note","topic":"game development","tags":[],"publishDate":"2020-03-08","pathname":"unity-dev-memo-1"},{"id":"a-rather-easy-way-to-implement-quicksort-in-js","title":"A Rather Easy Way to Implement Quicksort in JavaScript","description":"My attempt to implement quicksort.","category":"note","topic":"programming","tags":[],"publishDate":"2019-05-23","pathname":"a-rather-easy-way-to-implement-quicksort-in-js"}],"categories":[{"name":"essay","count":13},{"name":"review","count":15},{"name":"retrospective","count":15},{"name":"note","count":9},{"name":"research","count":3}]},"__N_SSG":true},"page":"/blog/[pathname]","query":{"pathname":"deploying-react-app-on-gae"},"buildId":"9Z7N7eLSY9tvz9ph3iSLw","isFallback":false,"gsp":true,"scriptLoader":[]}</script><script>(function(){var el=document.createElement('link');el.href='/subfont/fallback-6d661b96db.css';el.rel='stylesheet';document.body.appendChild(el)}())</script><noscript><link rel="stylesheet" href="/subfont/fallback-6d661b96db.css"></noscript></body></html>