{"pageProps":{"postContent":[{"type":"paragraph","children":[{"type":"plain","text":"For people like me who have only used a static host like Amazon S3 before, deploying React app on Google App Engine is a challenge. For all the references I found it looks straightforward and easy to deploy a React app, yet I still struggled for 2 days. Here is how I did it, with the things I realized by logs and tries and errors."}]},{"type":"heading","children":[{"type":"plain","text":"GAE is not a static host; it's a virtual machine"}],"depth":2},{"type":"paragraph","children":[{"type":"plain","text":"So you can't just push the build. You have to serve it, like starting a development server. So the next problem is, how?"}]},{"type":"heading","children":[{"type":"plain","text":"With default config, GAE only executes two scripts when deploying"}],"depth":2},{"type":"paragraph","children":[{"type":"plain","text":"They are "},{"type":"inlineCode","text":"npm install"},{"type":"plain","text":" and "},{"type":"inlineCode","text":"npm start"},{"type":"plain","text":"."}]},{"type":"paragraph","children":[{"type":"plain","text":"Like I mentioned before, for merely starting a server for React, these two seems enough. Then I found out it's not, because default "},{"type":"inlineCode","text":"npm start"},{"type":"plain","text":" provided by Create-React-App, which equals to "},{"type":"inlineCode","text":"node scripts/start.js"},{"type":"plain","text":" if you check out "},{"type":"inlineCode","text":"package.json"},{"type":"plain","text":", takes much time, and it's long enough to make the app not working. So we need a faster way to "},{"type":"italic","text":"serve"},{"type":"plain","text":" it."}]},{"type":"heading","children":[{"type":"plain","text":"Serve can do the trick"}],"depth":2},{"type":"paragraph","children":[{"type":"plain","text":"Literally, "},{"type":"link","text":"serve","url":"https://github.com/zeit/serve"},{"type":"plain","text":"."}]},{"type":"paragraph","children":[{"type":"plain","text":"Notice serve needs static files to run, so we need to build it first. Since GAE only runs two scripts, and building takes some time too, so I bound it to "},{"type":"inlineCode","text":"postinstall"},{"type":"plain","text":" instead of "},{"type":"inlineCode","text":"prestart"},{"type":"plain","text":" . By this way, GAE automatically builds right after it installs dependencies."}]},{"type":"paragraph","children":[{"type":"plain","text":"You can also use some host framework (like express) to do the hosting and routing stuff too."}]},{"type":"heading","children":[{"type":"plain","text":"Config the port"}],"depth":2},{"type":"paragraph","children":[{"type":"plain","text":"React development server default port is 3000, and serve's is 5000, while GAE uses 8080."}]},{"type":"paragraph","children":[{"type":"plain","text":"The scripts in "},{"type":"inlineCode","text":"package.json"},{"type":"plain","text":" I used when finally successfully deployed looks like this:"}]},{"type":"code","lang":"json","text":"\"script\": {\n  \"postinstall\": \"npm run build\",\n  \"start\": \"serve -l 8080 -s build\"\n}"},{"type":"paragraph","children":[{"type":"plain","text":"You need to configure app.yaml too, but I think many resources is talking about how to do it."}]},{"type":"paragraph","children":[{"type":"plain","text":"I hope this helps!"}]}],"postMetadata":{"id":"deploying-react-app-on-gae","title":"Deploying React.js App on GAE","description":"","category":"Web Development","tags":[],"publishDate":"2019-09-19","pathname":"deploying-react-app-on-gae"},"last5posts":[{"id":"site-patch-notes-2024-redesign","title":"Site Patch Notes: 2024 Redesign","description":"The 2024 redesign is finally here! I went on a journey of learning editorial design, and did an overhaul to this site's design, both functionality-wise and visual-wise.","category":"Meta","tags":[],"publishDate":"2024-08-18","pathname":"site-patch-notes-2024-redesign"},{"id":"a-peek-of-the-world","title":"A Peek of the World","description":"I went to Copenhagen and London for my honeymoon, the first trip to Europe in my life. Some memories keep staying on my mind and I have many thoughts about them.","category":"Life","tags":[],"publishDate":"2024-06-16","pathname":"a-peek-of-the-world"},{"id":"godot-essentials","title":"Godot Essentials","description":"The biggest lessons I learned in my first Godot project.","category":"Game Development","tags":[],"publishDate":"2024-04-21","pathname":"godot-essentials"},{"id":"4-years-reflection","title":"4 Years Reflection","description":"Another two years of life as a full-time developer has passed. Many things changed and many lessons learned. It's a perfect timing to look back and reflect.","category":"Life","tags":[],"publishDate":"2024-04-08","pathname":"4-years-reflection"},{"id":"improving-greatness","title":"Improving Greatness","description":"Breath of the Wild is one of the most impactful game in last decade. Yet for its successor, Nintendo built an even more polished version on an already magnificent fundamental.","category":"Gaming","tags":[],"publishDate":"2024-03-17","pathname":"improving-greatness"}],"categoryPosts":[{"id":"nextjs-app-font-not-loaded-on-remote-machine-issue","title":"Next.js App Font Not Loaded on Remote Machine Issue","description":"Debugging note of a source loading issue that never reproduces on the dev machine.","category":"Web Development","tags":[],"publishDate":"2023-06-05","pathname":"nextjs-app-font-not-loaded-on-remote-machine-issue"}],"categories":[{"name":"Meta","count":5},{"name":"Life","count":6},{"name":"Game Development","count":5},{"name":"Gaming","count":12},{"name":"League of Legends","count":8},{"name":"Web Development","count":4},{"name":"HKT48","count":4},{"name":"Programming","count":3},{"name":"Movie","count":2}]},"__N_SSG":true}