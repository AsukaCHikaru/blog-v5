{"pageProps":{"postContent":[{"type":"paragraph","body":[{"type":"textBody","style":"plain","value":"For people like me who have only used a static host like Amazon S3 before, deploying React app on Google App Engine is a challenge. For all the references I found it looks straightforward and easy to deploy a React app, yet I still struggled for 2 days. Here is how I did it, with the things I realized by logs and tries and errors."}]},{"type":"heading","level":2,"body":[{"type":"textBody","style":"plain","value":"GAE is not a static host; it's a virtual machine"}]},{"type":"paragraph","body":[{"type":"textBody","style":"plain","value":"So you can't just push the build. You have to serve it, like starting a development server. So the next problem is, how?"}]},{"type":"heading","level":2,"body":[{"type":"textBody","style":"plain","value":"With default config, GAE only executes two scripts when deploying"}]},{"type":"paragraph","body":[{"type":"textBody","style":"plain","value":"They are "},{"type":"textBody","style":"code","value":"npm install"},{"type":"textBody","style":"plain","value":" and "},{"type":"textBody","style":"code","value":"npm start"},{"type":"textBody","style":"plain","value":"."}]},{"type":"paragraph","body":[{"type":"textBody","style":"plain","value":"Like I mentioned before, for merely starting a server for React, these two seems enough. Then I found out it's not, because default "},{"type":"textBody","style":"code","value":"npm start"},{"type":"textBody","style":"plain","value":" provided by Create-React-App, which equals to "},{"type":"textBody","style":"code","value":"node scripts/start.js"},{"type":"textBody","style":"plain","value":" if you check out "},{"type":"textBody","style":"code","value":"package.json"},{"type":"textBody","style":"plain","value":", takes much time, and it's long enough to make the app not working. So we need a faster way to "},{"type":"textBody","style":"italic","value":"serve"},{"type":"textBody","style":"plain","value":" it."}]},{"type":"heading","level":2,"body":[{"type":"textBody","style":"plain","value":"Serve can do the trick"}]},{"type":"paragraph","body":[{"type":"textBody","style":"plain","value":"Literally, "},{"type":"link","body":[{"type":"textBody","style":"plain","value":"serve"}],"url":"<notion://www.notion.so/asukachikaru/%5B%3Chttps://github.com/zeit/serve%3E%5D(%3Chttps://github.com/zeit/serve%3E"},{"type":"textBody","style":"plain","value":">)."}]},{"type":"paragraph","body":[{"type":"textBody","style":"plain","value":"Notice serve needs static files to run, so we need to build it first. Since GAE only runs two scripts, and building takes some time too, so I bound it to "},{"type":"textBody","style":"code","value":"postinstall"},{"type":"textBody","style":"plain","value":" instead of "},{"type":"textBody","style":"code","value":"prestart"},{"type":"textBody","style":"plain","value":" . By this way, GAE automatically builds right after it installs dependencies."}]},{"type":"paragraph","body":[{"type":"textBody","style":"plain","value":"You can also use some host framework (like express) to do the hosting and routing stuff too."}]},{"type":"heading","level":2,"body":[{"type":"textBody","style":"plain","value":"Config the port"}]},{"type":"paragraph","body":[{"type":"textBody","style":"plain","value":"React development server default port is 3000, and serve's is 5000, while GAE uses 8080."}]},{"type":"paragraph","body":[{"type":"textBody","style":"plain","value":"The scripts in "},{"type":"textBody","style":"code","value":"package.json"},{"type":"textBody","style":"plain","value":" I used when finally successfully deployed looks like this:"}]},{"type":"code","lang":"json","body":"\"script\": {\n  \"postinstall\": \"npm run build\",\n  \"start\": \"serve -l 8080 -s build\"\n}"},{"type":"paragraph","body":[{"type":"textBody","style":"plain","value":"You need to configure app.yaml too, but I think many resources is talking about how to do it."}]},{"type":"paragraph","body":[{"type":"textBody","style":"plain","value":"I hope this helps!"}]}],"postMetadata":{"id":"deploying-react-app-on-gae","title":"Deploying React.js App on GAE","description":"","category":"note","topic":"web development","tags":[],"publishDate":"2019-09-19","pathname":"deploying-react-app-on-gae"},"last5posts":[{"id":"observation-on-programming-with-ai","title":"Observation on Programming with AI","description":"I reckoned getting familiar with AI coding tools is necessary, tried some, and to my surprise, I turned out to be quite optimistic.","category":"essay","topic":"programming","tags":[],"publishDate":"2025-03-13","pathname":"observation-on-programming-with-ai"},{"id":"blogging-and-digital-gardening","title":"Blogging and Digital Gardening in the Social Platform and Generative AI Era","description":"I talk to myself about why bother writing at somewhere nobody comes.","category":"essay","topic":"life","tags":[],"publishDate":"2025-02-11","pathname":"blogging-and-digital-gardening"},{"id":"a-redemption-three-years-later","title":"A Redemption Three Years Later","description":"CD PROJEKT RED made a promise about Night City, which they broke. Three years later they had another attempt, and to me, it was their redemption.","category":"review","topic":"gaming","tags":[],"publishDate":"2025-01-13","pathname":"a-redemption-three-years-later"},{"id":"s14-recap","title":"S14 Recap","description":"I did not play a lot of league during 2024, but I had a few unforgettable moments nonetheless.","category":"retrospective","topic":"gaming","tags":[],"publishDate":"2025-01-07","pathname":"s14-recap"},{"id":"thoughts-on-building-a-game-with-xstate","title":"Thoughts on Building a Game with XState","description":"After hearing about XState's good reputation for years, I used it to build the prototype for my game. These are my thoughts.","category":"note","topic":"game development","tags":[],"publishDate":"2025-01-04","pathname":"thoughts-on-building-a-game-with-xstate"}],"categoryPosts":[{"id":"thoughts-on-building-a-game-with-xstate","title":"Thoughts on Building a Game with XState","description":"After hearing about XState's good reputation for years, I used it to build the prototype for my game. These are my thoughts.","category":"note","topic":"game development","tags":[],"publishDate":"2025-01-04","pathname":"thoughts-on-building-a-game-with-xstate"},{"id":"godot-essentials","title":"Godot Essentials","description":"The biggest lessons I learned in my first Godot project.","category":"note","topic":"game development","tags":[],"publishDate":"2024-04-21","pathname":"godot-essentials"},{"id":"unity-dev-memo-2","title":"Unity Dev Memo (2)","description":"關於 Unity3D 內 raycast 的研究筆記。","category":"note","topic":"game development","tags":[],"publishDate":"2020-10-04","pathname":"unity-dev-memo-2"},{"id":"unity-dev-memo-1","title":"Unity Dev Memo (1)","description":"關於 Unity3D 物體移動，腳本執行順序以及 Hitbox 的筆記。","category":"note","topic":"game development","tags":[],"publishDate":"2020-03-08","pathname":"unity-dev-memo-1"},{"id":"a-rather-easy-way-to-implement-quicksort-in-js","title":"A Rather Easy Way to Implement Quicksort in JavaScript","description":"My attempt to implement quicksort.","category":"note","topic":"programming","tags":[],"publishDate":"2019-05-23","pathname":"a-rather-easy-way-to-implement-quicksort-in-js"}],"categories":[{"name":"essay","count":13},{"name":"review","count":15},{"name":"retrospective","count":15},{"name":"note","count":9},{"name":"research","count":3}]},"__N_SSG":true}