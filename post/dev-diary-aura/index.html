<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><title>Dev Diary: Aura | The work is undone.</title><meta name="description" content="asukachikaru&#x27;s blog"/><meta property="og:title" content="Dev Diary: Aura | The work is undone."/><meta property="twitter:title" content="Dev Diary: Aura | The work is undone."/><meta name="next-head-count" content="6"/><link rel="preconnect" href="/" crossorigin="anonymous"/><link rel="preload" href="/_next/static/css/3f14b923204890a1.css" as="style"/><link rel="stylesheet" href="/_next/static/css/3f14b923204890a1.css" data-n-g=""/><link rel="preload" href="/_next/static/css/d8403707d10b0477.css" as="style"/><link rel="stylesheet" href="/_next/static/css/d8403707d10b0477.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-b8f8d6679aaa5f42.js" defer=""></script><script src="/_next/static/chunks/framework-114634acb84f8baa.js" defer=""></script><script src="/_next/static/chunks/main-f2ca60db2beb93ed.js" defer=""></script><script src="/_next/static/chunks/pages/_app-17babe11a04a8b75.js" defer=""></script><script src="/_next/static/chunks/118-9f8d344ce3900aa3.js" defer=""></script><script src="/_next/static/chunks/pages/post/%5Bpathname%5D-ae7676ded4422893.js" defer=""></script><script src="/_next/static/y6fsH4Oeuc4QFYGMk-xHa/_buildManifest.js" defer=""></script><script src="/_next/static/y6fsH4Oeuc4QFYGMk-xHa/_ssgManifest.js" defer=""></script></head><body><div id="__next"><main class="__variable_cfcccd font-serif"><div class="max-w-7xl mx-auto grid grid-cols-12 gap-0 lg:gap-4"><div class="my-12 col-span-10 col-start-2 lg:col-span-7 lg:col-start-3"><h1 class="mb-2 text-3xl lg:text-6xl font-extrabold">Dev Diary: Aura</h1><div class="text-md lg:text-xl"><span class="inline-block mr-2 pr-2 false">May 28, 2018</span></div></div><div class="col-span-10 col-start-2 lg:col-span-7 lg:col-start-3"><div class="mb-6 text-lg lg:text-xl lg:leading-8"><span><span>在最近進行的 side project 中刻了一個靈氣(aura)輪子。比我想像中的麻煩，決定動筆記錄一下。</span></span></div><div class="mb-6 text-lg lg:text-xl lg:leading-8"><span><span>首先，這是個規模很小的回合制遊戲，所有角色算攻防加權的動作可以塞在一個迴圈裡面。概念很簡單，我打算先算加權，然後再用加權套進攻防公式，而靈氣的部分就塞在加權裡一起處理。</span></span></div><div class="mb-6 text-lg lg:text-xl lg:leading-8"><span><span>這裡出現了第一個問題：回到剛剛說的「一個迴圈算完所有數字」，這導致了有些人的靈氣被套進加權時，應該被影響的對象已經先算完了。我也不想算每個人的攻防時再去抓一次所有角色所持有靈氣的判斷，效率感覺就很差。</span></span></div><div class="mb-6 text-lg lg:text-xl lg:leading-8"><span><span>所以我在每次行動決定後攻防開始前，先把靈氣註冊到該陣營的資料裡，如此就不用多從所有角色撈一次靈氣的資料，所有人都可以到固定的地方找靈氣。</span></span></div><div class="mb-6 text-lg lg:text-xl lg:leading-8"><span><span>就這樣很開心地開始跑了之後出現了第二個問題：由於系統設計上所有角色的加權都可能互相影響，每次算加權都會對每個角色計算一次。幾個角色行動就算幾次。所以靈氣的效果就被乘以人數。</span></span></div><div class="mb-6 text-lg lg:text-xl lg:leading-8"><span><span>我的解法是當靈氣啟動時算一次受影響目標，連帶的加權也在那時候就算完。靈氣的啟動與否會有很明顯的斷點(每次攻防結束都會斷掉，效果就被收回。開始時再啟動，這時再把效果加回去)。而原本的加權計算部分，從只計算靈氣的效果加上啟動與否的判斷。</span></span></div><div class="mb-6 text-lg lg:text-xl lg:leading-8"><span><span>就遊戲設計上來說靈氣是一個不好處理的東西。持續性的效果代表特效不會比一次性的技能顯目，但如此往往讓玩家低估了他實際的效果，同時設計者與玩家之間對靈氣在 lore 所扮演角色的沉浸感也常常有所歧異。</span></span></div><div class="mb-6 text-lg lg:text-xl lg:leading-8"><span><span>簡單地說，如果不是很花巧思的靈氣，你往往會覺得他很無聊。但這樣無聊的東西事實上花了比我想像還多的功夫，僅此紀錄一筆。</span></span></div><div class="mb-6 text-lg lg:text-xl lg:leading-8"><span><span>至於我把靈氣寫完之後發現太強所以拔掉就又是另一個故事了。</span></span></div></div><div class="mt-16 mb-5 text-center col-span-12 lg:col-span-8 lg:col-start-3"><a href="https://asukachikaru.com" rel="noopener noreferrer" target="_blank">asukachikaru.com</a> <!-- -->2018-</div></div></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"postContent":[{"type":"paragraph","children":[{"type":"text","value":"在最近進行的 side project 中刻了一個靈氣(aura)輪子。比我想像中的麻煩，決定動筆記錄一下。","position":{"start":{"line":11,"column":1,"offset":189},"end":{"line":11,"column":55,"offset":243}}}]},{"type":"paragraph","children":[{"type":"text","value":"首先，這是個規模很小的回合制遊戲，所有角色算攻防加權的動作可以塞在一個迴圈裡面。概念很簡單，我打算先算加權，然後再用加權套進攻防公式，而靈氣的部分就塞在加權裡一起處理。","position":{"start":{"line":13,"column":1,"offset":245},"end":{"line":13,"column":85,"offset":329}}}]},{"type":"paragraph","children":[{"type":"text","value":"這裡出現了第一個問題：回到剛剛說的「一個迴圈算完所有數字」，這導致了有些人的靈氣被套進加權時，應該被影響的對象已經先算完了。我也不想算每個人的攻防時再去抓一次所有角色所持有靈氣的判斷，效率感覺就很差。","position":{"start":{"line":15,"column":1,"offset":331},"end":{"line":15,"column":101,"offset":431}}}]},{"type":"paragraph","children":[{"type":"text","value":"所以我在每次行動決定後攻防開始前，先把靈氣註冊到該陣營的資料裡，如此就不用多從所有角色撈一次靈氣的資料，所有人都可以到固定的地方找靈氣。","position":{"start":{"line":17,"column":1,"offset":433},"end":{"line":17,"column":69,"offset":501}}}]},{"type":"paragraph","children":[{"type":"text","value":"就這樣很開心地開始跑了之後出現了第二個問題：由於系統設計上所有角色的加權都可能互相影響，每次算加權都會對每個角色計算一次。幾個角色行動就算幾次。所以靈氣的效果就被乘以人數。","position":{"start":{"line":19,"column":1,"offset":503},"end":{"line":19,"column":87,"offset":589}}}]},{"type":"paragraph","children":[{"type":"text","value":"我的解法是當靈氣啟動時算一次受影響目標，連帶的加權也在那時候就算完。靈氣的啟動與否會有很明顯的斷點(每次攻防結束都會斷掉，效果就被收回。開始時再啟動，這時再把效果加回去)。而原本的加權計算部分，從只計算靈氣的效果加上啟動與否的判斷。","position":{"start":{"line":21,"column":1,"offset":591},"end":{"line":21,"column":117,"offset":707}}}]},{"type":"paragraph","children":[{"type":"text","value":"就遊戲設計上來說靈氣是一個不好處理的東西。持續性的效果代表特效不會比一次性的技能顯目，但如此往往讓玩家低估了他實際的效果，同時設計者與玩家之間對靈氣在 lore 所扮演角色的沉浸感也常常有所歧異。","position":{"start":{"line":23,"column":1,"offset":709},"end":{"line":23,"column":99,"offset":807}}}]},{"type":"paragraph","children":[{"type":"text","value":"簡單地說，如果不是很花巧思的靈氣，你往往會覺得他很無聊。但這樣無聊的東西事實上花了比我想像還多的功夫，僅此紀錄一筆。","position":{"start":{"line":25,"column":1,"offset":809},"end":{"line":25,"column":59,"offset":867}}}]},{"type":"paragraph","children":[{"type":"text","value":"至於我把靈氣寫完之後發現太強所以拔掉就又是另一個故事了。","position":{"start":{"line":27,"column":1,"offset":869},"end":{"line":27,"column":29,"offset":897}}}]}],"postSummary":{"id":"dev-diary-aura","title":"Dev Diary: Aura","category":"Game Development","language":["zh-TW"],"tags":[],"publishDate":"2018-05-28","pathname":"dev-diary-aura","zhTwLink":null,"filename":"Dev Diary - Aura (blog)"}},"__N_SSG":true},"page":"/post/[pathname]","query":{"pathname":"dev-diary-aura"},"buildId":"y6fsH4Oeuc4QFYGMk-xHa","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>